<nav class="fixed top-0 left-0 right-0 bg-primary-50 border-b border-primary-500 z-30 transition-all duration-300"
  [class.md:left-64]="sidebarOpen() && !isMobile()">
  <div class="flex items-center justify-between px-4 md:px-6 py-3 md:py-4">

    <!-- Toggle Button (visible only on mobile) -->
    <app-button class="md:hidden" [iconSrc]="sidebarOpen() ? 'assets/icons/close.svg' : 'assets/icons/menu.svg'"
      iconPosition="center" [shape]="'circle'" customClass="bg-primary-500 text-primary-900 shadow-md"
      (clicked)="toggleMenu()">
    </app-button>

    <!-- Logo/Brand -->
    <div class="flex items-center space-x-2 mx-auto md:mx-0">
      <app-button class="hidden md:block" iconSrc="assets/icons/logo.svg" iconPosition="center" [shape]="'circle'"
        customClass="hover:bg-primary-50-100 transition-colors">
      </app-button>
      <span class="text-lg font-bold text-primary-900 hidden md:inline">Fashion Hub</span>
    </div>

    <!-- Right Section -->
    <div class="flex items-center space-x-3 md:space-x-6">

      <!-- Desktop Search -->
      <div class="relative bg-primary rounded-full hidden md:block">
        <div class="absolute inset-y-0 left-0 ps-3 flex items-center pointer-events-none">
          <img src="assets/icons/search.svg" alt="Search" class="w-4 h-4 text-primary-400" />
        </div>
        <input type="text" placeholder="Search" (input)="onSearch($event)"
          class="ps-9 pe-4 py-1.5 rounded-full bg-primary text-sm focus:outline-none w-40 lg:w-56" />
      </div>

      <!-- Mobile Search Toggle -->
      @if (!showMobileSearch()) {
      <app-button class="md:hidden mobile-search-toggle" iconSrc="assets/icons/search.svg" iconPosition="center"
        [shape]="'circle'" customClass="hover:bg-primary-50-100 transition-colors" (clicked)="toggleMobileSearch()">
      </app-button>
      }

      <!-- Icons -->
      <div class="flex items-center space-x-1 md:space-x-3">
        <app-button iconSrc="assets/icons/moon.svg" iconPosition="center" [shape]="'circle'"
          customClass="bg-primary hover:bg-primary-50-100 transition-colors">
        </app-button>

        <app-button iconSrc="assets/icons/globe.svg" iconPosition="center" [shape]="'circle'"
          customClass="bg-primary hover:bg-primary-50-100 transition-colors">
        </app-button>

        <app-cart-dropdown></app-cart-dropdown>

        <!-- Profile Dropdown -->
        <app-profile-dropdown></app-profile-dropdown>
      </div>
    </div>
  </div>

  <!-- Mobile Search Input -->
  @if (showMobileSearch()) {
  <div class="px-4 pb-3 md:hidden mobile-search-box" appClickOutside (clickOutside)="closeMobileSearch()">
    <div class="relative bg-primary rounded-full">
      <div class="absolute inset-y-0 left-0 ps-3 flex items-center pointer-events-none">
        <img src="assets/icons/search.svg" alt="Search" class="w-4 h-4 text-primary-400" />
      </div>
      <input id="mobileSearchInput" type="text" placeholder="Search" (input)="onSearch($event)"
        class="ps-10 pe-4 py-2 rounded-full bg-primary text-sm focus:outline-none w-full" />
    </div>
  </div>
  }
</nav>